main mlp library source code